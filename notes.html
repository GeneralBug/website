<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Bug's Notes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style.css" rel="stylesheet">
    <link rel="icon" href="Assets/breadbug.ico">
    <script src="jquery-3.7.1.min.js"></script>
  </head>  
  <body>
    <div class="main">
                <div class="nav">
            <img id="breadbug"
                    src="Assets/breadbug spin 2.gif" 
                    alt="Digital render of a breadbug spinning">
            <div class="paragraph">
                <p class="link_list" id="header_list">
                    [ <a href="index.html">Home</a> ]<br>
                    [ <a href="games.html">Games</a> ]<br>
                    [ <a href="cat.html">Cat</a> ]<br>
                    [ <a href="notes.html">Notes</a> ]<br>
                    --- <br>
                    <a rel="me" href="https://mastodon.gamedev.place/@GeneralBug"><img class="link_icon" src="Assets/Logos/logo_mastodon.png" alt="Mastodon"></a>
                    <a href="https://generalbug.itch.io/"><img class="link_icon" src="Assets/Logos/logo_itch.png" alt="Itch"></a>
                    <a href="https://github.com/GeneralBug"><img class="link_icon" src="Assets/Logos/logo_github.png" alt="GitHub"></a><br>
                </p>
            </div>
        </div>
        <div class="content">
            <div class="paragraph">
                <p>
                    As an exercise intended to improve my own design abilities by analysing other games, I started writing these little "review" things when I play a game (though I don't want them to be reviews, some get more "review-y" than others). They aren't really meant for others, so some of them are very rambly and possibly incomprehensible, so read them at your own risk.
                    <br>
                    <br>
                    Also they're listed with the system I played it on and my general feelings about it (positive/negative). I only started dating them in April 2023, but the earliest are from about 2020, if I remember correctly. I plan to make the list sortable, currently it's just alphabetical.                
                    <br>
                </p>
            </div>
            <ol id = "notes_list">
                
            </ol>
        </div>
        <div class="nav_offset"></div>
    </div>
</body>
  
<script>
    populate_list();

    function populate_list()
    {
        //function for populating the list from json, based on https://stackoverflow.com/questions/28256271/populate-ul-in-html-with-json-data
        $.getJSON('/Assets/notes.json', function (data) 
        {
            var ul = document.getElementById("notes_list");
    
            for( var i = 0; i < data.length; i++ )
            { 
                var o = data[i];
                //console.log(o);
                var li = document.createElement("li");
                li.classList.add("sortable");
                //button
                var header = document.createElement("button");
                header.classList.add("collapsible");
                header.innerHTML = o.title + " (" + o.platform + ")";
                //div
                var body = document.createElement("div");
                body.classList.add("collapsible-content");
                //h2
                var h2 = document.createElement("h2");
                h2.innerHTML = o.feel;
                body.appendChild(h2);
                //h3
                var h3 = document.createElement("h3");
                h3.innerHTML = o.date;
                body.appendChild(h3);
                //paragraph
                var p = document.createElement("p");
                p.innerHTML = o.notes;
                body.appendChild(p);
                
                //adds functionality to the buttons, based on https://www.w3schools.com/howto/howto_js_collapsible.asp
                header.addEventListener("click", function() 
                {
                    this.classList.toggle("active");
                    var content = this.nextElementSibling;
                    if (content.style.display === "block") 
                    {
                        content.style.display = "none";
                    } 
                    else 
                    {
                        content.style.display = "block";
                    }
                });
                
                li.appendChild(header);
                li.appendChild(body);
                ul.appendChild(li);
            }                   
        sortList(ul);
        });

    }
    
    function sortList(list) 
    {
        //https://www.w3schools.com/howto/howto_js_sort_list.asp
        //TODO: sort by date, platform
        console.log("running sort");
        var i, switching, b, shouldSwitch;
        switching = true;
        while (switching) 
        {
            switching = false;
            b = list.getElementsByClassName("sortable");
            console.log(b.length);
            for (i = 0; i < (b.length - 1); i++) 
            {
                shouldSwitch = false;
                if (b[i].innerHTML.toLowerCase() > b[i + 1].innerHTML.toLowerCase()) 
                {
                    /* If next item is alphabetically lower than current item,
                    mark as a switch and break the loop: */
                    shouldSwitch = true;
                    break;
                }
            }
            if (shouldSwitch) 
            {
                /* If a switch has been marked, make the switch
                and mark the switch as done: */
                b[i].parentNode.insertBefore(b[i + 1], b[i]);
                switching = true;
            }
        }
    }
</script>
  

</html>
